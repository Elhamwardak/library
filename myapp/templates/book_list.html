{% extends 'main.html' %}

{% block title %}Books Management{% endblock title %}

{% block content %}

<div class="row">
	<div class="col-md-5 mx-auto mb-5">
	  <form id="searchForm" action="{% url 'books-management' %}" method="GET">
		<div class="input-group">
		  <input
			class="form-control border-end-0 border rounded-pill"
			type="search"
			placeholder="Enter The Book Title"
			id="example-search-input"
			name="search_book"
			value="{{search_book}}"
		  />
		  <span class="input-group-append">
			<input
			  class="btn btn-outline-secondary bg-light border-bottom-0 border rounded-pill ms-n5"
			  type="submit"
			  value="search"
			/>
		  </span>
		</div>
	  </form>
	</div>
  </div>

<div class="p-4 shadow">
	<table class="table table-striped table-hover">
		<thead>
			<tr>
				<th>
					<span class="custom-checkbox">
						<input type="checkbox" id="selectAll">
						<label for="selectAll"></label>
					</span>
				</th>
				<th>Cover Photo</th>
				<th>Title</th>
				<th>Description</th>
				<th>Author</th>
				<th>Issue Date</th>
				<th>Download</th>
				<th>Action</th>
			</tr>
		</thead>
		<tbody>
			{% for book in books %}
			<tr>
				<td>
					<span class="custom-checkbox">
						<input type="checkbox" id="checkbox1" name="options[]" value="1">
						<label for="checkbox1"></label>
					</span>
				</td>
				<td>
					{% if book.cover_photo %}
						<img src="{{ book.cover_photo.url }}" style="width:70px;">
					{% endif %}
				</td>
				<td>{{book.title}}</td>
				<td>{{book.description}}</td>
				<td>{{book.author}}</td>
				<td>{{book.issue_date}}</td>
				<td>
					{% if book.book_file != null and book.book_file != "" %}
						<a href="{{ book.book_file.url }}" class="btn btn-primary text-white btn-xs">
							<i class="fa-solid fa-download"></i>
						</a>
					{% endif %}
				</td>
				<td>
					<a href="{% url 'update-book' book.id %}" class="edit" data-toggle="modal"><i class="fa-solid fa-pen-to-square"></i></a>
					<a href="{% url 'delete-book' book.id %}" class="delete" data-toggle="modal"><i class="fa-solid fa-trash"></i></a>
				</td>
			</tr>					
				{% endfor %}
		</tbody>
	</table>
</div> 
<br>
	{% include 'pagination.html' with queryset=books custom_range=custom_range %}

{% endblock %}